<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BY M BOUTIQUE - Experiencia Premium</title>
    
    <!-- Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ===== VARIABLES Y RESET ===== */
        :root {
            --primary-black: #000000;
            --primary-pink: #E1306C;
            --gold: #D4AF37;
            --light-gold: #F4E4B6;
            --dark-gray: #2C2C2C;
            --light-gray: #F5F5F5;
            --white: #FFFFFF;
            --rose-gold: #B76E79;
            --deep-purple: #6A0DAD;
            
            --transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-slow: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
            --transition-fast: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            
            --shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 25px 50px rgba(0, 0, 0, 0.15);
            --shadow-gold: 0 0 30px rgba(212, 175, 55, 0.4);
            --shadow-pink: 0 0 30px rgba(225, 48, 108, 0.4);
            
            --gradient-gold: linear-gradient(135deg, var(--gold) 0%, var(--light-gold) 100%);
            --gradient-pink: linear-gradient(135deg, var(--primary-pink) 0%, var(--rose-gold) 100%);
            --gradient-luxury: linear-gradient(135deg, var(--gold) 0%, var(--primary-pink) 50%, var(--deep-purple) 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            line-height: 1.6;
            color: var(--dark-gray);
            overflow-x: hidden;
            background: var(--white);
        }

        /* ===== MODO EDICIÓN ===== */
        .edit-mode {
            position: relative;
        }

        .edit-mode .editable {
            position: relative;
            outline: 2px dashed rgba(225, 48, 108, 0.3);
            transition: var(--transition);
        }

        .edit-mode .editable:hover {
            outline: 2px dashed var(--primary-pink);
            background: rgba(225, 48, 108, 0.05);
        }

        .edit-mode .editable::after {
            content: '✏️';
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--gradient-pink);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
            z-index: 100;
            opacity: 0;
            transition: var(--transition);
        }

        .edit-mode .editable:hover::after {
            opacity: 1;
        }

        .edit-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-slow);
        }

        .edit-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .edit-modal {
            background: var(--white);
            border-radius: 25px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.8) translateY(50px);
            transition: var(--transition-slow);
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
            border: 2px solid var(--gold);
            padding: 2.5rem;
        }

        .edit-overlay.active .edit-modal {
            transform: scale(1) translateY(0);
        }

        .edit-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: var(--gradient-pink);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: var(--transition);
            font-size: 1.2rem;
            box-shadow: var(--shadow-pink);
        }

        .edit-close:hover {
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 10px 30px rgba(225, 48, 108, 0.6);
        }

        .edit-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .edit-form h3 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            background: var(--gradient-luxury);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .edit-form input,
        .edit-form textarea,
        .edit-form select {
            padding: 1rem 1.5rem;
            border: 2px solid var(--light-gray);
            border-radius: 12px;
            font-size: 1rem;
            transition: var(--transition);
            font-family: 'Montserrat', sans-serif;
            width: 100%;
        }

        .edit-form input:focus,
        .edit-form textarea:focus,
        .edit-form select:focus {
            outline: none;
            border-color: var(--primary-pink);
            box-shadow: 0 0 0 3px rgba(225, 48, 108, 0.1);
        }

        .edit-form textarea {
            min-height: 120px;
            resize: vertical;
        }

        .edit-form button {
            background: var(--gradient-pink);
            color: white;
            border: none;
            padding: 1.2rem 2rem;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .edit-form button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-pink);
        }

        .edit-form .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .edit-toolbar {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--white);
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 1rem;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            transform: translateX(150%);
            transition: var(--transition);
        }

        .edit-toolbar.active {
            transform: translateY(0);
        }

        .edit-toolbar button {
            background: var(--gradient-luxury);
            color: white;
            border: none;
            padding: 0.8rem 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .edit-toolbar button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-pink);
        }

        .image-preview {
            width: 100%;
            height: 200px;
            background: var(--light-gray);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            overflow: hidden;
            position: relative;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .image-preview .placeholder {
            font-size: 3rem;
            color: #ccc;
        }

        .image-upload-btn {
            background: var(--gradient-gold);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            width: 100%;
            justify-content: center;
        }

        .image-upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-gold);
        }

        .feature-input, .spec-input {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .feature-input-field, .spec-name-field, .spec-value-field {
            flex: 1;
        }

        .remove-feature, .remove-spec {
            background: var(--primary-pink);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .uploaded-images {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .uploaded-image {
            position: relative;
            width: 100px;
            height: 100px;
            border-radius: 8px;
            overflow: hidden;
        }

        .uploaded-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .remove-image {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--primary-pink);
            color: white;
            border: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ===== LOADER ===== */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--white);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        .loader-content {
            text-align: center;
        }

        .loader-logo {
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 3rem;
            font-family: 'Playfair Display', serif;
        }

        .loader-logo span:first-child {
            color: var(--primary-black);
        }

        .loader-logo span:last-child {
            background: var(--gradient-luxury);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .loader-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid transparent;
            border-top: 3px solid var(--primary-pink);
            border-right: 3px solid var(--gold);
            border-radius: 50%;
            animation: spin 1.5s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ===== HEADER Y NAVBAR ===== */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.97);
            backdrop-filter: blur(15px);
            z-index: 1000;
            transition: var(--transition-slow);
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.2rem 5%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-size: 2rem;
            font-weight: 800;
            text-decoration: none;
            font-family: 'Playfair Display', serif;
            position: relative;
            cursor: pointer;
        }

        .logo-black {
            color: var(--primary-black);
            position: relative;
            z-index: 2;
        }

        .logo-pink {
            background: var(--gradient-pink);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 2;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2.5rem;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark-gray);
            font-weight: 600;
            transition: var(--transition);
            position: relative;
            padding: 0.5rem 0;
            cursor: pointer;
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--gradient-luxury);
            transition: var(--transition);
        }

        .nav-links a:hover {
            color: var(--primary-pink);
        }

        .nav-links a:hover::before {
            width: 100%;
        }

        .nav-icons {
            display: flex;
            gap: 1.8rem;
        }

        .nav-icon {
            font-size: 1.3rem;
            color: var(--dark-gray);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            padding: 0.5rem;
        }

        /* ===== HERO SECTION ===== */
        .hero {
            height: 100vh;
            background: linear-gradient(135deg, #0a0a0a 0%, #2d1b69 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            max-width: 900px;
            padding: 0 2rem;
            z-index: 2;
            position: relative;
        }

        .hero h1 {
            font-size: 5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            font-family: 'Playfair Display', serif;
        }

        .hero h1 span:first-child {
            color: var(--white);
            display: block;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .hero h1 span:last-child {
            background: var(--gradient-luxury);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: block;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .hero p {
            font-size: 1.4rem;
            margin-bottom: 3rem;
            color: var(--light-gold);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-buttons {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1.2rem 2.5rem;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            transition: var(--transition);
            cursor: pointer;
            font-size: 1.1rem;
            display: inline-flex;
            align-items: center;
            gap: 0.8rem;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: var(--gradient-pink);
            color: var(--white);
            box-shadow: var(--shadow-pink);
        }

        .btn-primary:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 20px 40px rgba(225, 48, 108, 0.4);
        }

        .btn-secondary {
            background: transparent;
            color: var(--light-gold);
            border: 2px solid var(--gold);
            box-shadow: var(--shadow-gold);
        }

        .btn-secondary:hover {
            background: var(--gold);
            color: var(--dark-gray);
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 20px 40px rgba(212, 175, 55, 0.4);
        }

        /* ===== CATEGORÍAS SECTION ===== */
        .section {
            padding: 8rem 5%;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        .section-header {
            text-align: center;
            margin-bottom: 5rem;
        }

        .section-title {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            position: relative;
            display: inline-block;
            font-family: 'Playfair Display', serif;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 4px;
            background: var(--gradient-luxury);
            border-radius: 2px;
        }

        .section-subtitle {
            color: var(--dark-gray);
            font-size: 1.3rem;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.8;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2.5rem;
        }

        .category-card {
            background: var(--white);
            border-radius: 25px;
            padding: 3rem 2rem;
            text-align: center;
            transition: var(--transition);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .category-card:hover {
            transform: translateY(-15px) scale(1.03);
            box-shadow: var(--shadow-hover);
        }

        .category-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 2;
            transition: var(--transition);
            color: var(--primary-pink);
        }

        .category-card:hover .category-icon {
            transform: scale(1.2) rotate(10deg);
        }

        .category-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 2;
        }

        .category-desc {
            color: var(--dark-gray);
            font-size: 1rem;
            position: relative;
            z-index: 2;
            opacity: 0.8;
            margin-bottom: 1.5rem;
        }

        .btn-view {
            background: var(--gradient-luxury);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: var(--shadow);
        }

        .btn-view:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: var(--shadow-hover);
        }

        /* ===== JOYERÍA SECTION ===== */
        .joyeria {
            background: linear-gradient(135deg, var(--light-gray) 0%, #f8f9fa 100%);
            position: relative;
            overflow: hidden;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2.5rem;
        }

        .product-card {
            background: var(--white);
            border-radius: 25px;
            overflow: hidden;
            transition: var(--transition);
            box-shadow: var(--shadow);
            position: relative;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .product-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: var(--shadow-hover);
        }

        .product-image {
            width: 100%;
            height: 280px;
            background: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-image .placeholder {
            font-size: 5rem;
            color: var(--primary-pink);
            opacity: 0.7;
        }

        .product-info {
            padding: 2rem;
            position: relative;
        }

        .product-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 0.8rem;
            color: var(--dark-gray);
        }

        .product-desc {
            color: var(--dark-gray);
            font-size: 1rem;
            margin-bottom: 1.5rem;
            opacity: 0.8;
            line-height: 1.6;
        }

        .product-price {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary-pink);
            margin-bottom: 1.5rem;
            position: relative;
            display: inline-block;
        }

        .product-actions {
            display: flex;
            gap: 1rem;
        }

        .btn-small {
            padding: 0.8rem 1.5rem;
            font-size: 0.9rem;
            flex: 1;
            text-align: center;
            border-radius: 25px;
        }

        .product-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--gradient-pink);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 3;
        }

        /* ===== PÁGINAS DE CATEGORÍA ===== */
        .category-page {
            display: none;
            min-height: 100vh;
            padding: 120px 5% 5rem;
            background: var(--light-gray);
        }

        .category-page.active {
            display: block;
        }

        .page-header {
            text-align: center;
            margin-bottom: 4rem;
            position: relative;
            padding: 0 2rem;
        }

        .page-title {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
            background: var(--gradient-luxury);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-subtitle {
            font-size: 1.3rem;
            color: var(--dark-gray);
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.8;
        }

        .back-button {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            background: var(--gradient-pink);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            box-shadow: var(--shadow-pink);
        }

        .back-button:hover {
            transform: translateY(-50%) translateX(-5px);
            box-shadow: 0 10px 30px rgba(225, 48, 108, 0.4);
        }

        .admin-only {
            display: none;
        }

        .is-admin .admin-only {
            display: flex;
        }

        /* ===== MODAL DE DETALLES ===== */
        .product-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-slow);
            padding: 2rem;
        }

        .product-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-container {
            background: var(--white);
            border-radius: 25px;
            max-width: 1200px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 2px solid var(--gold);
        }

        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: var(--gradient-pink);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: var(--transition);
            font-size: 1.2rem;
            box-shadow: var(--shadow-pink);
        }

        .modal-close:hover {
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 10px 30px rgba(225, 48, 108, 0.6);
        }

        .modal-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            min-height: 600px;
        }

        .modal-gallery {
            position: relative;
            background: var(--light-gray);
            border-radius: 25px 0 0 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            position: relative;
            overflow: hidden;
        }

        .modal-main-image {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-main-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .modal-main-image .placeholder {
            font-size: 8rem;
            color: var(--primary-pink);
            filter: drop-shadow(5px 5px 15px rgba(0,0,0,0.3));
        }

        .modal-info {
            padding: 3rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .modal-header {
            margin-bottom: 2rem;
        }

        .modal-badge {
            display: inline-block;
            background: var(--gradient-pink);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1rem;
            box-shadow: var(--shadow-pink);
        }

        .modal-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
            background: var(--gradient-luxury);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        .modal-price {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--primary-pink);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .modal-original-price {
            font-size: 1.8rem;
            color: var(--dark-gray);
            text-decoration: line-through;
            opacity: 0.6;
        }

        .modal-description {
            margin-bottom: 2rem;
        }

        .modal-description p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--dark-gray);
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }

        .modal-features {
            margin-bottom: 2rem;
        }

        .features-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--dark-gray);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 0.95rem;
            color: var(--dark-gray);
        }

        .feature-icon {
            color: var(--gold);
            font-size: 1rem;
        }

        .modal-specs {
            background: var(--light-gray);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }

        .specs-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--dark-gray);
        }

        .specs-list {
            list-style: none;
        }

        .specs-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
        }

        .specs-list li:last-child {
            border-bottom: none;
        }

        .spec-name {
            font-weight: 600;
            color: var(--dark-gray);
        }

        .spec-value {
            color: var(--primary-pink);
            font-weight: 500;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .btn-whatsapp {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: white;
            border: none;
            padding: 1.2rem 2rem;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex: 1;
            text-decoration: none;
            box-shadow: 0 10px 25px rgba(37, 211, 102, 0.3);
        }

        .btn-whatsapp:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(37, 211, 102, 0.4);
        }

        .modal-footer {
            border-top: 2px solid var(--light-gray);
            padding-top: 1.5rem;
        }

        .warranty-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .warranty-icon {
            color: var(--gold);
            font-size: 1.5rem;
        }

        .warranty-text {
            font-size: 0.9rem;
            color: var(--dark-gray);
        }

        .shipping-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .shipping-icon {
            color: var(--primary-pink);
            font-size: 1.5rem;
        }

        .shipping-text {
            font-size: 0.9rem;
            color: var(--dark-gray);
        }

        /* ===== FOOTER ===== */
        footer {
            background: linear-gradient(135deg, var(--dark-gray) 0%, #1a1a1a 100%);
            color: var(--white);
            padding: 5rem 5% 2rem;
            position: relative;
            overflow: hidden;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 3rem;
            margin-bottom: 3rem;
            position: relative;
            z-index: 2;
        }

        .footer-logo {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            font-family: 'Playfair Display', serif;
        }

        .footer-desc {
            opacity: 0.8;
            margin-bottom: 2rem;
            line-height: 1.8;
            font-size: 1.1rem;
        }

        .social-links {
            display: flex;
            gap: 1.2rem;
        }

        .social-link {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            text-decoration: none;
            color: var(--white);
        }

        .social-link:hover {
            transform: translateY(-5px);
            background: var(--primary-pink);
        }

        .footer-links h3 {
            font-size: 1.4rem;
            margin-bottom: 1.8rem;
            position: relative;
            display: inline-block;
        }

        .footer-links h3::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 50px;
            height: 3px;
            background: var(--gradient-luxury);
            border-radius: 2px;
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 1rem;
        }

        .footer-links a {
            color: var(--white);
            text-decoration: none;
            opacity: 0.8;
            transition: var(--transition);
            display: inline-block;
            cursor: pointer;
        }

        .footer-links a:hover {
            opacity: 1;
            color: var(--gold);
            padding-left: 10px;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 3rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            opacity: 0.7;
            position: relative;
            z-index: 2;
        }

        /* ===== ADMIN PANEL ===== */
        .admin-panel {
            position: fixed;
            top: 0;
            right: -450px;
            width: 450px;
            height: 100vh;
            background: var(--white);
            box-shadow: -10px 0 50px rgba(0, 0, 0, 0.2);
            z-index: 2000;
            transition: var(--transition-slow);
            padding: 2.5rem;
            overflow-y: auto;
            border-left: 4px solid var(--gradient-luxury);
        }

        .admin-panel.active {
            right: 0;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--light-gray);
        }

        .admin-header h3 {
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--gradient-luxury);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .admin-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-gray);
            transition: var(--transition);
            padding: 0.5rem;
            border-radius: 50%;
        }

        .admin-close:hover {
            background: var(--light-gray);
            transform: rotate(90deg);
        }

        .admin-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .admin-form input,
        .admin-form textarea,
        .admin-form select {
            padding: 1rem 1.5rem;
            border: 2px solid var(--light-gray);
            border-radius: 12px;
            font-size: 1rem;
            transition: var(--transition);
            font-family: 'Montserrat', sans-serif;
        }

        .admin-form input:focus,
        .admin-form textarea:focus,
        .admin-form select:focus {
            outline: none;
            border-color: var(--primary-pink);
            box-shadow: 0 0 0 3px rgba(225, 48, 108, 0.1);
        }

        .admin-form button {
            background: var(--gradient-pink);
            color: white;
            border: none;
            padding: 1.2rem 2rem;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .admin-form button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-pink);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 1024px) {
            .hero h1 {
                font-size: 4rem;
            }
            
            .section-title {
                font-size: 3rem;
            }

            .page-title {
                font-size: 3rem;
            }

            .back-button {
                position: relative;
                margin-bottom: 2rem;
                transform: none;
                top: auto;
                left: auto;
            }

            .modal-content {
                grid-template-columns: 1fr;
            }

            .modal-gallery {
                border-radius: 25px 25px 0 0;
                min-height: 400px;
            }

            .modal-main-image .placeholder {
                font-size: 6rem;
            }

            .edit-modal {
                width: 95%;
                padding: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero h1 {
                font-size: 3rem;
            }

            .section-title {
                font-size: 2.5rem;
            }

            .page-title {
                font-size: 2.5rem;
            }

            .admin-panel {
                width: 100%;
                right: -100%;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }

            .categories-grid {
                grid-template-columns: 1fr;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }

            .back-button {
                width: 100%;
                justify-content: center;
            }

            .modal-container {
                margin: 1rem;
            }

            .modal-info {
                padding: 2rem;
            }

            .modal-title {
                font-size: 2rem;
            }

            .modal-price {
                font-size: 2.2rem;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .modal-actions {
                flex-direction: column;
            }

            .edit-toolbar {
                top: 70px;
                right: 10px;
            }

            .edit-form .form-row {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .page-title {
                font-size: 2rem;
            }

            .loader-logo {
                font-size: 3rem;
            }

            .modal-gallery {
                padding: 2rem;
            }

            .modal-main-image .placeholder {
                font-size: 4rem;
            }
        }
    </style>
</head>
<body>
    <!-- Loader -->
    <div class="loader">
        <div class="loader-content">
            <div class="loader-logo">
                <span class="logo-black">BY M</span>
                <span class="logo-pink">BOUTIQUE</span>
            </div>
            <div class="loader-spinner"></div>
        </div>
    </div>

    <!-- Barra de herramientas de edición -->
    <div class="edit-toolbar" id="edit-toolbar">
        <button id="toggle-edit-mode">
            <i class="fas fa-edit"></i>
            Modo Edición
        </button>
        <button id="add-category">
            <i class="fas fa-plus"></i>
            Nueva Categoría
        </button>
        <button id="add-product">
            <i class="fas fa-gem"></i>
            Nuevo Producto
        </button>
        <button id="save-changes">
            <i class="fas fa-save"></i>
            Guardar en Firebase
        </button>
    </div>

    <!-- Overlay de edición -->
    <div class="edit-overlay" id="edit-overlay">
        <div class="edit-modal">
            <button class="edit-close" id="edit-close">
                <i class="fas fa-times"></i>
            </button>
            <div class="edit-form" id="edit-form">
                <!-- El contenido del formulario se carga dinámicamente -->
            </div>
        </div>
    </div>

    <!-- Header -->
    <header>
        <nav class="navbar">
            <div class="logo" id="go-home">
                <span class="logo-black">BY M</span>
                <span class="logo-pink">BOUTIQUE</span>
            </div>
            
            <ul class="nav-links">
                <li><a class="nav-home">Inicio</a></li>
                <li><a class="nav-categorias">Categorías</a></li>
                <li><a class="nav-joyeria">Joyería</a></li>
                <li><a class="nav-contacto">Contacto</a></li>
            </ul>
            
            <div class="nav-icons">
                <i class="fas fa-search nav-icon"></i>
                <i class="fas fa-user-shield nav-icon" id="admin-toggle"></i>
            </div>
        </nav>
    </header>

    <!-- PÁGINA PRINCIPAL (HOME) -->
    <div id="home-page" class="page active">
        <!-- Hero Section -->
        <section class="hero" id="home">
            <div class="hero-content">
                <h1 class="editable" data-type="hero-title">
                    <span class="logo-black">BY M</span>
                    <span class="logo-pink">BOUTIQUE</span>
                </h1>
                <p class="editable" data-type="hero-subtitle">Donde la elegancia se encuentra con la innovación. Descubre piezas únicas que cuentan tu historia.</p>
                <div class="hero-buttons">
                    <a class="btn btn-primary nav-joyeria">
                        <i class="fas fa-gem"></i>
                        Explorar Colección
                    </a>
                    <a class="btn btn-secondary nav-categorias">
                        <i class="fas fa-crown"></i>
                        Ver Categorías
                    </a>
                </div>
            </div>
        </section>

        <!-- Categorías Section -->
        <section class="section" id="categorias">
            <div class="section-header">
                <h2 class="section-title editable" data-type="categories-title">Nuestras Categorías</h2>
                <p class="section-subtitle editable" data-type="categories-subtitle">Explora nuestra exclusiva selección de productos cuidadosamente curados para los gustos más exigentes</p>
            </div>
            
            <div class="categories-grid" id="categories-container">
                <!-- Las categorías se cargan dinámicamente aquí -->
            </div>
        </section>

        <!-- Joyería Section -->
        <section class="section joyeria" id="joyeria">
            <div class="section-header">
                <h2 class="section-title editable" data-type="featured-title">Colección Exclusiva</h2>
                <p class="section-subtitle editable" data-type="featured-subtitle">Descubre nuestras piezas más destacadas, inspiradas en las tendencias más actuales del mundo de la joyería</p>
            </div>
            
            <div class="products-grid" id="featured-products">
                <!-- Los productos destacados se cargan dinámicamente aquí -->
            </div>
        </section>

        <!-- Footer -->
        <footer id="contacto">
            <div class="footer-content">
                <div class="footer-about">
                    <div class="footer-logo editable" data-type="footer-logo">
                        <span class="logo-black">BY M</span>
                        <span class="logo-pink">BOUTIQUE</span>
                    </div>
                    <p class="footer-desc editable" data-type="footer-desc">Especialistas en joyería fina y accesorios de lujo. Cada pieza cuenta una historia única de elegancia y sofisticación.</p>
                    <div class="social-links">
                        <a href="https://l.instagram.com/?u=https%3A%2F%2Fwhatsapp.com%2Fchannel%2F0029VbC852YEawdntzQGfk0W%3Ffbclid%3DPAZXh0bgNhZW0CMTEAAafjxCin8CI-nNds7ypEMlO1F0gL3fZW6bVN4WBafn0oVtZHN5XfTX7OFdkDQg_aem_q14-ZPJ9KuyixzEZwx_qWg&e=AT0geFphwvl3PG0WStCEKDELeSf5vEYuKiF7jKiqbwdT6IJXyA5uH1gBXrjGmfmeE8SiNGIqibvTL7VuPnQ6YGWkoBesxU0lcEpgziy9MQ" class="social-link">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="https://www.instagram.com/by_m_boutique_?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" class="social-link">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-facebook"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <h3 class="editable" data-type="footer-collections-title">Colecciones</h3>
                    <ul id="footer-collections">
                        <!-- Los enlaces de colecciones se cargan dinámicamente aquí -->
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h3 class="editable" data-type="footer-services-title">Servicios</h3>
                    <ul>
                        <li><a href="#asesoramiento" class="editable" data-type="service-1">Asesoramiento Personal</a></li>
                        <li><a href="#personalizacion" class="editable" data-type="service-2">Personalización</a></li>
                        <li><a href="#mantenimiento" class="editable" data-type="service-3">Mantenimiento</a></li>
                        <li><a href="#garantia" class="editable" data-type="service-4">Garantía</a></li>
                    </ul>
                </div>

                <div class="footer-links">
                    <h3 class="editable" data-type="footer-contact-title">Contacto</h3>
                    <ul>
                        <li><i class="fas fa-phone"></i> <span class="editable" data-type="footer-phone">+506 8846 7553</span></li>
                        <li><i class="fas fa-envelope"></i> <span class="editable" data-type="footer-email">@gmail.com</span></li>
                        <li><i class="fas fa-map-marker-alt"></i> <span class="editable" data-type="footer-address">Casa de residencia</span></li>
                        <li><i class="fas fa-clock"></i> <span class="editable" data-type="footer-hours">Lun - Vie: 10:00 - 8:00</span></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p class="editable" data-type="footer-copyright">&copy; 2024 BY M BOUTIQUE. Todos los derechos reservados. | Diseñado con <i class="fas fa-heart" style="color: var(--primary-pink);"></i> para todos</p>
            </div>
        </footer>
    </div>

    <!-- PÁGINAS DE CATEGORÍAS -->
    <div id="category-pages">
        <!-- Las páginas de categorías se generan dinámicamente -->
    </div>

    <!-- Modal de Detalles de Producto -->
    <div class="product-modal" id="product-modal">
        <div class="modal-container">
            <button class="modal-close" id="modal-close">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="modal-content">
                <div class="modal-gallery">
                    <div class="modal-main-image" id="modal-main-image">
                        <i class="fas fa-gem placeholder"></i>
                    </div>
                    <div class="modal-thumbnails" id="modal-thumbnails">
                        <!-- Las miniaturas se cargan dinámicamente -->
                    </div>
                </div>
                
                <div class="modal-info">
                    <div class="modal-header">
                        <div class="modal-badge" id="modal-badge">Exclusivo</div>
                        <h1 class="modal-title" id="modal-title">Collar Diamante Eterno</h1>
                        <div class="modal-price">
                            <span id="modal-price">$2,499.99</span>
                            <span class="modal-original-price" id="modal-original-price">$2,999.99</span>
                        </div>
                    </div>
                    
                    <div class="modal-description">
                        <p id="modal-description">Este exquisito collar de diamantes presenta un diseño atemporal con corte princesa que captura y refleja la luz de manera espectacular. Cada diamante ha sido seleccionado meticulosamente por su claridad y brillo excepcionales.</p>
                        
                        <div class="modal-features">
                            <h3 class="features-title">Características Destacadas</h3>
                            <div class="features-grid" id="modal-features">
                                <!-- Las características se cargan dinámicamente -->
                            </div>
                        </div>
                        
                        <div class="modal-specs">
                            <h3 class="specs-title">Especificaciones Técnicas</h3>
                            <ul class="specs-list" id="modal-specs">
                                <!-- Las especificaciones se cargan dinámicamente -->
                            </ul>
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <a href="https://wa.me/+50688467553?text=Hola,%20me%20interesa%20el%20producto:%20Collar%20Diamante%20Eterno" class="btn-whatsapp" target="_blank" id="whatsapp-link">
                            <i class="fab fa-whatsapp"></i>
                            Consultar por WhatsApp
                        </a>
                        <button class="btn btn-primary admin-only" id="edit-product-details" style="background: var(--gradient-luxury);">
                            <i class="fas fa-edit"></i>
                            Editar Producto
                        </button>
                    </div>
                    
                    <div class="modal-footer">
                        <div class="warranty-info">
                            <i class="fas fa-shield-alt warranty-icon"></i>
                            <span class="warranty-text">Garantía de autenticidad y calidad premium incluida</span>
                        </div>
                        <div class="shipping-info">
                            <i class="fas fa-shipping-fast shipping-icon"></i>
                            <span class="shipping-text">Envío express gratuito en compras superiores a $500</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Panel de Administración -->
    <div class="admin-panel" id="admin-panel">
        <div class="admin-header">
            <h3>Panel de Administración</h3>
            <button class="admin-close" id="admin-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="admin-form" id="login-form">
            <h4>Iniciar Sesión</h4>
            <input type="email" id="admin-email" placeholder="Correo electrónico" required>
            <input type="password" id="admin-password" placeholder="Contraseña" required>
            <button type="submit" id="admin-login-btn">Iniciar Sesión</button>
            <p style="text-align: center; margin-top: 1rem; font-size: 0.9rem; opacity: 0.7;">
                Usa las credenciales registradas en Firebase para acceder
            </p>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-analytics.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, getDocs, updateDoc, deleteDoc, doc, onSnapshot, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-storage.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCYlEb60k86cwmm_-C1tZIgL7Eo-ydIsn0",
            authDomain: "tienda-2d261.firebaseapp.com",
            projectId: "tienda-2d261",
            storageBucket: "tienda-2d261.firebasestorage.app",
            messagingSenderId: "360531164353",
            appId: "1:360531164353:web:4ed59318764fa68fd7e840",
            measurementId: "G-R53R4DJG61"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // Hacer disponible Firebase en el ámbito global
        window.firebase = {
            app,
            auth,
            db,
            storage,
            firestore: {
                collection,
                addDoc,
                getDocs,
                updateDoc,
                deleteDoc,
                doc,
                onSnapshot,
                setDoc,
                getDoc
            },
            storageFunctions: {
                ref,
                uploadBytes,
                getDownloadURL,
                deleteObject
            },
            authFunctions: {
                signInWithEmailAndPassword,
                createUserWithEmailAndPassword,
                onAuthStateChanged,
                signOut
            }
        };

        console.log("🔥 Firebase inicializado correctamente");
    </script>

    <script>
        // ===== DATOS DE LA APLICACIÓN =====
        let appData = {
            categories: [
                {
                    id: 'joyeria',
                    title: 'Joyería Fina',
                    description: 'Piezas únicas con diamantes, perlas y piedras preciosas de la más alta calidad',
                    icon: 'fas fa-gem',
                    products: [
                        {
                            id: '1',
                            title: 'Collar Diamante Eterno',
                            description: 'Collar de diamantes con corte princesa en oro blanco de 18k, perfecto para ocasiones especiales',
                            price: '$2,499.99',
                            originalPrice: '$2,999.99',
                            badge: 'Exclusivo',
                            images: [],
                            features: [
                                'Diamantes naturales de alta calidad',
                                'Peso total: 2.5 quilates',
                                'Longitud ajustable: 40-45 cm',
                                'Certificado de autenticidad'
                            ],
                            specs: {
                                'Material': 'Oro blanco 18k',
                                'Piedras': '25 diamantes naturales',
                                'Color diamantes': 'G-H (Casi incoloro)',
                                'Claridad': 'VS1-VS2',
                                'Corte': 'Princesa excelente',
                                'Garantía': '2 años internacional'
                            }
                        },
                        {
                            id: '2',
                            title: 'Anillo Rosa Dorada',
                            description: 'Anillo elaborado a mano con técnica de alambrismo en oro rosa con zirconias incrustadas',
                            price: '$345.99',
                            originalPrice: '$399.99',
                            badge: 'Más Vendido',
                            images: [],
                            features: [
                                'Técnica artesanal de alambrismo',
                                'Oro rosa de 14k',
                                'Zirconias de alta calidad',
                                'Ajuste personalizable'
                            ],
                            specs: {
                                'Material': 'Oro rosa 14k',
                                'Piedras': '12 zirconias',
                                'Talla': 'Ajustable 5-8',
                                'Acabado': 'Pulido brillante',
                                'Garantía': '1 año'
                            }
                        }
                    ]
                },
                {
                    id: 'anillos',
                    title: 'Anillos',
                    description: 'Desde compromiso hasta fashion rings, encuentra el anillo perfecto',
                    icon: 'fas fa-ring',
                    products: [
                        {
                            id: '3',
                            title: 'Anillo de Compromiso Clásico',
                            description: 'Anillo de compromiso con diamante solitario de 1 quilate en oro blanco de 18k',
                            price: '$3,200.00',
                            badge: 'Compromiso',
                            images: [],
                            features: [
                                'Diamante solitario de 1 quilate',
                                'Oro blanco de 18k',
                                'Corte brillante redondo',
                                'Certificado GIA'
                            ],
                            specs: {
                                'Material': 'Oro blanco 18k',
                                'Piedra principal': 'Diamante de 1 quilate',
                                'Color': 'D-E (Incoloro)',
                                'Claridad': 'IF-VVS1',
                                'Garantía': 'Garantía de por vida'
                            }
                        }
                    ]
                },
                {
                    id: 'collares',
                    title: 'Collares',
                    description: 'Elegantes collares que complementan cualquier outfit con distinción',
                    icon: 'fas fa-gem', // Corregido: icono de collar
                    products: []
                },
                {
                    id: 'perfumes',
                    title: 'Perfumes',
                    description: 'Fragancias exclusivas que definen tu personalidad y estilo único',
                    icon: 'fas fa-wind',
                    products: []
                },
                {
                    id: 'ropa',
                    title: 'Ropa',
                    description: 'Prendas de diseñador que combinan elegancia y comodidad',
                    icon: 'fas fa-tshirt',
                    products: []
                },
                {
                    id: 'tennis',
                    title: 'Tennis',
                    description: 'Calzado deportivo de lujo para los amantes del estilo urbano',
                    icon: 'fas fa-shoe-prints',
                    products: []
                },
                {
                    id: 'carteras',
                    title: 'Carteras',
                    description: 'Accesorios de cuero premium que combinan funcionalidad y diseño',
                    icon: 'fas fa-shopping-bag', // Corregido: icono de cartera
                    products: []
                },
                {
                    id: 'cosmeticos',
                    title: 'Cosméticos',
                    description: 'Productos de belleza de alta gama para realzar tu naturalidad',
                    icon: 'fas fa-palette',
                    products: []
                }
            ],
            featuredProducts: ['1', '2'],
            content: {
                'hero-title': 'BY M BOUTIQUE',
                'hero-subtitle': 'Donde la elegancia se encuentra con la innovación. Descubre piezas únicas que cuentan tu historia.',
                'categories-title': 'Nuestras Categorías',
                'categories-subtitle': 'Explora nuestra exclusiva selección de productos cuidadosamente curados para los gustos más exigentes',
                'featured-title': 'Colección Exclusiva',
                'featured-subtitle': 'Descubre nuestras piezas más destacadas, inspiradas en las tendencias más actuales del mundo de la joyería',
                'footer-logo': 'BY M BOUTIQUE',
                'footer-desc': 'Especialistas en joyería fina y accesorios de lujo. Cada pieza cuenta una historia única de elegancia y sofisticación.',
                'footer-collections-title': 'Colecciones',
                'footer-services-title': 'Servicios',
                'footer-contact-title': 'Contacto',
                'footer-phone': '+506 8846 7553',
                'footer-email': 'by_m_boutique@gmail.com',
                'footer-address': 'Casa de residencia',
                'footer-hours': 'Lun - Vie: 10:00 - 20:00',
                'footer-copyright': '© 2024 BY M BOUTIQUE. Todos los derechos reservados. | Diseñado con ❤️ para mentes sofisticadas',
                'service-1': 'Asesoramiento Personal',
                'service-2': 'Personalización',
                'service-3': 'Mantenimiento',
                'service-4': 'Garantía',
                'service-5': 'Envío Internacional'
            }
        };

        // ===== VARIABLES GLOBALES =====
        let currentPage = 'home-page';
        let isAdmin = false;
        let isEditMode = false;
        let currentEditingElement = null;
        let currentProductInModal = null;
        let tempProductImages = [];

        // ===== INICIALIZACIÓN =====
        document.addEventListener('DOMContentLoaded', function() {
            // Ocultar loader después de 2 segundos
            setTimeout(() => {
                document.querySelector('.loader').style.display = 'none';
                initializeApp();
            }, 2000);
        });

        async function initializeApp() {
            console.log('🚀 INICIANDO APLICACIÓN...');
            
            // Inicializar Firebase Auth
            initializeFirebaseAuth();
            
            // Cargar datos guardados
            await loadAppData();
            
            // Renderizar contenido
            renderCategories();
            renderFeaturedProducts();
            renderCategoryPages();
            updateFooterCollections();

            // Inicializar navegación
            initializeNavigation();

            // Inicializar modal
            initializeProductModal();

            // Inicializar sistema de edición
            initializeEditSystem();

            // Inicializar panel admin
            initializeAdminPanel();

            console.log('✅ APLICACIÓN INICIALIZADA CORRECTAMENTE');
        }

        // ===== FIREBASE AUTH =====
        function initializeFirebaseAuth() {
            if (window.firebase && window.firebase.authFunctions) {
                const { onAuthStateChanged, signOut } = window.firebase.authFunctions;
                
                onAuthStateChanged(window.firebase.auth, (user) => {
                    if (user) {
                        // Usuario autenticado
                        isAdmin = true;
                        document.body.classList.add('is-admin');
                        document.getElementById('edit-toolbar').classList.add('active');
                        console.log('🔓 Usuario autenticado:', user.email);
                    } else {
                        // Usuario no autenticado
                        isAdmin = false;
                        document.body.classList.remove('is-admin');
                        document.getElementById('edit-toolbar').classList.remove('active');
                        console.log('🔒 Usuario no autenticado');
                    }
                });
            }
        }

        // ===== SISTEMA DE NAVEGACIÓN =====
        function initializeNavigation() {
            console.log('🔗 INICIALIZANDO NAVEGACIÓN...');

            // Navegación principal - HOME
            document.querySelectorAll('.nav-home, #go-home').forEach(el => {
                el.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('🏠 Navegando a HOME');
                    showPage('home-page');
                });
            });

            // Navegación - CATEGORÍAS
            document.querySelectorAll('.nav-categorias').forEach(el => {
                el.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('📁 Navegando a CATEGORÍAS');
                    if (currentPage === 'home-page') {
                        document.getElementById('categorias').scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                    } else {
                        showPage('home-page');
                        setTimeout(() => {
                            document.getElementById('categorias').scrollIntoView({ 
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }, 500);
                    }
                });
            });

            // Navegación - JOYERÍA
            document.querySelectorAll('.nav-joyeria').forEach(el => {
                el.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('💎 Navegando a JOYERÍA');
                    showCategoryPage('joyeria');
                });
            });

            // Navegación - CONTACTO
            document.querySelectorAll('.nav-contacto').forEach(el => {
                el.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('📞 Navegando a CONTACTO');
                    if (currentPage === 'home-page') {
                        document.getElementById('contacto').scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                    } else {
                        showPage('home-page');
                        setTimeout(() => {
                            document.getElementById('contacto').scrollIntoView({ 
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }, 500);
                    }
                });
            });

            // EVENTO GLOBAL PARA BOTONES "VER COLECCIÓN" - CORREGIDO
            document.addEventListener('click', function(e) {
                const viewCollectionBtn = e.target.closest('.btn-view');
                if (viewCollectionBtn) {
                    const categoryId = viewCollectionBtn.getAttribute('data-category');
                    console.log('👁️ Botón VER COLECCIÓN clickeado:', categoryId);
                    if (categoryId) {
                        showCategoryPage(categoryId);
                    }
                    e.preventDefault();
                    e.stopPropagation();
                }
            });

            // EVENTO GLOBAL PARA BOTONES "VER DETALLES"
            document.addEventListener('click', function(e) {
                const viewDetailsBtn = e.target.closest('.view-details');
                if (viewDetailsBtn) {
                    const productId = viewDetailsBtn.getAttribute('data-product');
                    console.log('🔍 Botón VER DETALLES clickeado:', productId);
                    if (productId) {
                        openProductModal(productId);
                    }
                    e.preventDefault();
                    e.stopPropagation();
                }
            });

            // EVENTO GLOBAL PARA ENLACES DE COLECCIONES EN FOOTER - CORREGIDO
            document.addEventListener('click', function(e) {
                const footerCollectionLink = e.target.closest('.footer-collections a');
                if (footerCollectionLink) {
                    const categoryId = footerCollectionLink.getAttribute('data-category');
                    console.log('📂 Enlace de colección clickeado:', categoryId);
                    if (categoryId) {
                        showCategoryPage(categoryId);
                    }
                    e.preventDefault();
                    e.stopPropagation();
                }
            });

            console.log('✅ NAVEGACIÓN INICIALIZADA');
        }

        function showPage(pageId) {
            console.log('📄 Mostrando página:', pageId);
            
            // Ocultar página actual
            const currentPageElement = document.getElementById(currentPage);
            if (currentPageElement) {
                currentPageElement.classList.remove('active');
                currentPageElement.style.display = 'none';
            }

            // Mostrar nueva página
            const newPageElement = document.getElementById(pageId);
            if (newPageElement) {
                newPageElement.style.display = 'block';
                setTimeout(() => {
                    newPageElement.classList.add('active');
                }, 50);
                
                currentPage = pageId;
                window.scrollTo(0, 0);
            }
        }

        function showCategoryPage(categoryId) {
            console.log('📂 Mostrando categoría:', categoryId);
            const pageId = `${categoryId}-page`;
            if (document.getElementById(pageId)) {
                showPage(pageId);
            } else {
                console.warn('❌ Página de categoría no encontrada:', pageId);
                // Si no existe la página, mostrar la categoría joyería por defecto
                showPage('joyeria-page');
            }
        }

        function goBack() {
            console.log('↩️ Volviendo al inicio');
            showPage('home-page');
        }

        // ===== RENDERIZADO DE CONTENIDO =====
        function renderCategories() {
            const container = document.getElementById('categories-container');
            container.innerHTML = '';

            appData.categories.forEach(category => {
                const categoryCard = document.createElement('div');
                categoryCard.className = 'category-card editable';
                categoryCard.setAttribute('data-type', 'category');
                categoryCard.setAttribute('data-category-id', category.id);
                
                categoryCard.innerHTML = `
                    <i class="${category.icon} category-icon"></i>
                    <h3 class="category-title">${category.title}</h3>
                    <p class="category-desc">${category.description}</p>
                    <button class="btn-view" data-category="${category.id}">
                        <i class="fas fa-eye"></i>
                        Ver Colección
                    </button>
                `;

                container.appendChild(categoryCard);
            });

            console.log('✅ CATEGORÍAS RENDERIZADAS');
        }

        function renderFeaturedProducts() {
            const container = document.getElementById('featured-products');
            container.innerHTML = '';

            appData.featuredProducts.forEach(productId => {
                const product = findProductById(productId);
                if (product) {
                    const productCard = createProductCard(product);
                    container.appendChild(productCard);
                }
            });

            console.log('✅ PRODUCTOS DESTACADOS RENDERIZADOS');
        }

        function renderCategoryPages() {
            const container = document.getElementById('category-pages');
            container.innerHTML = '';

            appData.categories.forEach(category => {
                const categoryPage = document.createElement('div');
                categoryPage.id = `${category.id}-page`;
                categoryPage.className = 'category-page';
                
                categoryPage.innerHTML = `
                    <div class="page-header">
                        <button class="back-button" onclick="goBack()">
                            <i class="fas fa-arrow-left"></i>
                            Volver al Inicio
                        </button>
                        <h1 class="page-title">${category.title}</h1>
                        <p class="page-subtitle">${category.description}</p>
                        <button class="btn-view admin-only" onclick="openEditModal('new-product', null, '${category.id}')" style="margin-left: 1rem;">
                            <i class="fas fa-plus"></i>
                            Agregar Producto
                        </button>
                    </div>
                    <div class="products-grid" id="${category.id}-products">
                        <!-- Los productos se cargarán aquí -->
                    </div>
                `;

                container.appendChild(categoryPage);
                renderCategoryProducts(category.id);
            });

            console.log('✅ PÁGINAS DE CATEGORÍAS RENDERIZADAS');
        }

        function renderCategoryProducts(categoryId) {
            const container = document.getElementById(`${categoryId}-products`);
            if (!container) return;

            container.innerHTML = '';

            const category = appData.categories.find(cat => cat.id === categoryId);
            if (category && category.products.length > 0) {
                category.products.forEach(product => {
                    const productCard = createProductCard(product);
                    container.appendChild(productCard);
                });
            } else {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
                        <i class="${category.icon}" style="font-size: 4rem; color: var(--light-gray); margin-bottom: 1rem;"></i>
                        <h3 style="color: var(--dark-gray); margin-bottom: 1rem;">Próximamente</h3>
                        <p style="color: var(--dark-gray); opacity: 0.7;">Estamos trabajando en nuevas piezas para esta categoría.</p>
                    </div>
                `;
            }
        }

        function createProductCard(product) {
            const productCard = document.createElement('div');
            productCard.className = 'product-card editable';
            productCard.setAttribute('data-type', 'product');
            productCard.setAttribute('data-product-id', product.id);
            
            let badgeHtml = '';
            if (product.badge) {
                badgeHtml = `<div class="product-badge">${product.badge}</div>`;
            }

            // Mostrar imagen si existe, sino mostrar placeholder
            let imageHtml = '';
            if (product.images && product.images.length > 0) {
                imageHtml = `<img src="${product.images[0]}" alt="${product.title}">`;
            } else {
                imageHtml = `<i class="fas fa-gem placeholder"></i>`;
            }

            productCard.innerHTML = `
                ${badgeHtml}
                <div class="product-image">
                    ${imageHtml}
                </div>
                <div class="product-info">
                    <h3 class="product-title">${product.title}</h3>
                    <p class="product-desc">${product.description}</p>
                    <div class="product-price">${product.price}</div>
                    <div class="product-actions">
                        <button class="btn btn-primary btn-small view-details" data-product="${product.id}">
                            Ver Detalles
                        </button>
                    </div>
                </div>
            `;

            return productCard;
        }

        function updateFooterCollections() {
            const container = document.getElementById('footer-collections');
            container.innerHTML = '';

            appData.categories.forEach(category => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `<a class="footer-collections" data-category="${category.id}">${category.title}</a>`;
                container.appendChild(listItem);
            });
        }

        function findProductById(productId) {
            for (const category of appData.categories) {
                const product = category.products.find(p => p.id === productId);
                if (product) return product;
            }
            return null;
        }

        function findProductCategory(productId) {
            for (const category of appData.categories) {
                const product = category.products.find(p => p.id === productId);
                if (product) return category.id;
            }
            return null;
        }

        // ===== MODAL DE DETALLES =====
        function initializeProductModal() {
            const modal = document.getElementById('product-modal');
            const closeBtn = document.getElementById('modal-close');
            const editBtn = document.getElementById('edit-product-details');

            closeBtn.addEventListener('click', closeProductModal);
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeProductModal();
                }
            });

            editBtn.addEventListener('click', function() {
                if (currentProductInModal) {
                    openEditModal('edit-product', currentProductInModal);
                    closeProductModal();
                }
            });

            console.log('✅ MODAL INICIALIZADO');
        }

        function openProductModal(productId) {
            console.log('🔄 Abriendo modal para producto:', productId);
            const product = findProductById(productId);
            if (!product) {
                console.error('❌ Producto no encontrado:', productId);
                return;
            }

            currentProductInModal = productId;

            // Actualizar contenido del modal
            document.getElementById('modal-badge').textContent = product.badge || '';
            document.getElementById('modal-title').textContent = product.title;
            document.getElementById('modal-price').textContent = product.price;
            
            const originalPriceEl = document.getElementById('modal-original-price');
            if (product.originalPrice) {
                originalPriceEl.textContent = product.originalPrice;
                originalPriceEl.style.display = 'block';
            } else {
                originalPriceEl.style.display = 'none';
            }
            
            document.getElementById('modal-description').textContent = product.description;

            // Actualizar imagen del modal
            const modalImage = document.getElementById('modal-main-image');
            if (product.images && product.images.length > 0) {
                modalImage.innerHTML = `<img src="${product.images[0]}" alt="${product.title}">`;
            } else {
                modalImage.innerHTML = `<i class="fas fa-gem placeholder"></i>`;
            }

            // Actualizar características
            const featuresContainer = document.getElementById('modal-features');
            featuresContainer.innerHTML = '';
            if (product.features && product.features.length > 0) {
                product.features.forEach(feature => {
                    const featureItem = document.createElement('div');
                    featureItem.className = 'feature-item';
                    featureItem.innerHTML = `
                        <i class="fas fa-gem feature-icon"></i>
                        <span>${feature}</span>
                    `;
                    featuresContainer.appendChild(featureItem);
                });
            }

            // Actualizar especificaciones
            const specsContainer = document.getElementById('modal-specs');
            specsContainer.innerHTML = '';
            if (product.specs) {
                Object.entries(product.specs).forEach(([key, value]) => {
                    const specItem = document.createElement('li');
                    specItem.innerHTML = `
                        <span class="spec-name">${key}:</span>
                        <span class="spec-value">${value}</span>
                    `;
                    specsContainer.appendChild(specItem);
                });
            }

            // Actualizar enlace de WhatsApp
            const message = `Hola, me interesa el producto: ${product.title} - ${product.price}`;
            document.getElementById('whatsapp-link').href = `https://wa.me/+50688467553?text=${encodeURIComponent(message)}`;

            // Mostrar modal
            const modal = document.getElementById('product-modal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';

            console.log('✅ MODAL ABIERTO CORRECTAMENTE');
        }

        function closeProductModal() {
            const modal = document.getElementById('product-modal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
            currentProductInModal = null;
            console.log('🔒 MODAL CERRADO');
        }

        // ===== SISTEMA DE EDICIÓN =====
        function initializeEditSystem() {
            const editToolbar = document.getElementById('edit-toolbar');
            const editOverlay = document.getElementById('edit-overlay');
            const editClose = document.getElementById('edit-close');
            const editForm = document.getElementById('edit-form');
            const toggleEditMode = document.getElementById('toggle-edit-mode');
            const addCategory = document.getElementById('add-category');
            const addProduct = document.getElementById('add-product');
            const saveChanges = document.getElementById('save-changes');

            // Alternar modo edición
            toggleEditMode.addEventListener('click', function() {
                isEditMode = !isEditMode;
                document.body.classList.toggle('edit-mode', isEditMode);
                editToolbar.classList.toggle('active', isEditMode);
                
                if (isEditMode) {
                    this.innerHTML = '<i class="fas fa-times"></i> Salir Edición';
                } else {
                    this.innerHTML = '<i class="fas fa-edit"></i> Modo Edición';
                    closeEditModal();
                }
            });

            // Agregar nueva categoría
            addCategory.addEventListener('click', function() {
                openEditModal('new-category');
            });

            // Agregar nuevo producto
            addProduct.addEventListener('click', function() {
                openEditModal('new-product');
            });

            // Guardar cambios
            saveChanges.addEventListener('click', function() {
                saveAppData();
            });

            // Cerrar modal de edición
            editClose.addEventListener('click', closeEditModal);
            editOverlay.addEventListener('click', function(e) {
                if (e.target === editOverlay) {
                    closeEditModal();
                }
            });

            // Eventos de clic en elementos editables
            document.addEventListener('click', function(e) {
                if (!isEditMode || !e.target.closest('.editable')) return;
                
                const editable = e.target.closest('.editable');
                const type = editable.getAttribute('data-type');
                const categoryId = editable.getAttribute('data-category-id');
                const productId = editable.getAttribute('data-product-id');
                
                if (type === 'category') {
                    openEditModal('edit-category', categoryId);
                } else if (type === 'product') {
                    openEditModal('edit-product', productId);
                } else {
                    openEditModal('edit-content', type);
                }
            });

            console.log('✅ SISTEMA DE EDICIÓN INICIALIZADO');
        }

        function openEditModal(mode, id = null, categoryId = null) {
            const editOverlay = document.getElementById('edit-overlay');
            const editForm = document.getElementById('edit-form');
            
            let formHtml = '';
            let title = '';

            switch (mode) {
                case 'edit-content':
                    const contentKey = id;
                    const currentValue = appData.content[contentKey] || '';
                    title = 'Editar Contenido';
                    formHtml = `
                        <h3>${title}</h3>
                        <input type="hidden" id="edit-content-key" value="${contentKey}">
                        <textarea id="edit-content-value" placeholder="Ingresa el nuevo contenido">${currentValue}</textarea>
                        <button type="button" id="save-content">Guardar Cambios</button>
                    `;
                    break;

                case 'new-category':
                    title = 'Nueva Categoría';
                    formHtml = `
                        <h3>${title}</h3>
                        <input type="text" id="category-title" placeholder="Título de la categoría" required>
                        <textarea id="category-desc" placeholder="Descripción de la categoría" required></textarea>
                        <select id="category-icon" required>
                            <option value="">Seleccionar Icono</option>
                            <option value="fas fa-gem">Gema</option>
                            <option value="fas fa-ring">Anillo</option>
                            <option value="fas fa-gem">Collar</option>
                            <option value="fas fa-gem">Aretes</option>
                            <option value="fas fa-crown">Corona</option>
                            <option value="fas fa-star">Estrella</option>
                            <option value="fas fa-heart">Corazón</option>
                            <option value="fas fa-wind">Perfume</option>
                            <option value="fas fa-tshirt">Ropa</option>
                            <option value="fas fa-shoe-prints">Tennis</option>
                            <option value="fas fa-shopping-bag">Cartera</option>
                            <option value="fas fa-palette">Cosméticos</option>
                        </select>
                        <button type="button" id="save-category">Crear Categoría</button>
                    `;
                    break;

                case 'edit-category':
                    const category = appData.categories.find(cat => cat.id === id);
                    if (category) {
                        title = 'Editar Categoría';
                        formHtml = `
                            <h3>${title}</h3>
                            <input type="hidden" id="category-id" value="${category.id}">
                            <input type="text" id="category-title" value="${category.title}" required>
                            <textarea id="category-desc" required>${category.description}</textarea>
                            <select id="category-icon" required>
                                <option value="fas fa-gem" ${category.icon === 'fas fa-gem' ? 'selected' : ''}>Gema</option>
                                <option value="fas fa-ring" ${category.icon === 'fas fa-ring' ? 'selected' : ''}>Anillo</option>
                                <option value="fas fa-gem" ${category.icon === 'fas fa-gem' ? 'selected' : ''}>Collar</option>
                                <option value="fas fa-gem" ${category.icon === 'fas fa-gem' ? 'selected' : ''}>Aretes</option>
                                <option value="fas fa-crown" ${category.icon === 'fas fa-crown' ? 'selected' : ''}>Corona</option>
                                <option value="fas fa-star" ${category.icon === 'fas fa-star' ? 'selected' : ''}>Estrella</option>
                                <option value="fas fa-heart" ${category.icon === 'fas fa-heart' ? 'selected' : ''}>Corazón</option>
                                <option value="fas fa-wind" ${category.icon === 'fas fa-wind' ? 'selected' : ''}>Perfume</option>
                                <option value="fas fa-tshirt" ${category.icon === 'fas fa-tshirt' ? 'selected' : ''}>Ropa</option>
                                <option value="fas fa-shoe-prints" ${category.icon === 'fas fa-shoe-prints' ? 'selected' : ''}>Tennis</option>
                                <option value="fas fa-shopping-bag" ${category.icon === 'fas fa-shopping-bag' ? 'selected' : ''}>Cartera</option>
                                <option value="fas fa-palette" ${category.icon === 'fas fa-palette' ? 'selected' : ''}>Cosméticos</option>
                            </select>
                            <div class="form-row">
                                <button type="button" id="save-category">Guardar Cambios</button>
                                <button type="button" id="delete-category" style="background: var(--primary-pink);">Eliminar Categoría</button>
                            </div>
                        `;
                    }
                    break;

                case 'new-product':
                    title = 'Nuevo Producto';
                    formHtml = `
                        <h3>${title}</h3>
                        <input type="text" id="product-title" placeholder="Título del producto" required>
                        <textarea id="product-desc" placeholder="Descripción del producto" required></textarea>
                        <input type="text" id="product-price" placeholder="Precio" required>
                        <input type="text" id="product-original-price" placeholder="Precio original (opcional)">
                        <select id="product-category" required>
                            <option value="">Seleccionar Categoría</option>
                            ${appData.categories.map(cat => `<option value="${cat.id}" ${cat.id === categoryId ? 'selected' : ''}>${cat.title}</option>`).join('')}
                        </select>
                        <select id="product-badge">
                            <option value="">Sin Badge</option>
                            <option value="Exclusivo">Exclusivo</option>
                            <option value="Más Vendido">Más Vendido</option>
                            <option value="Nuevo">Nuevo</option>
                            <option value="Edición Limitada">Edición Limitada</option>
                            <option value="Oferta">Oferta</option>
                        </select>
                        
                        <h4>Imágenes del Producto</h4>
                        <div id="images-container">
                            <div class="image-preview">
                                <i class="fas fa-image placeholder"></i>
                            </div>
                            <input type="file" id="product-image-upload" accept="image/*" multiple style="display: none;">
                            <button type="button" class="image-upload-btn" onclick="document.getElementById('product-image-upload').click()">
                                <i class="fas fa-upload"></i>
                                Subir Imágenes
                            </button>
                            <div id="uploaded-images" class="uploaded-images"></div>
                        </div>
                        
                        <h4>Características</h4>
                        <div id="features-container">
                            <div class="feature-input">
                                <input type="text" placeholder="Característica 1" class="feature-input-field">
                                <button type="button" class="remove-feature" onclick="removeFeatureInput(this)">×</button>
                            </div>
                        </div>
                        <button type="button" id="add-feature" onclick="addFeatureInput()">+ Agregar Característica</button>
                        
                        <h4>Especificaciones</h4>
                        <div id="specs-container">
                            <div class="spec-input">
                                <input type="text" placeholder="Nombre especificación" class="spec-name-field">
                                <input type="text" placeholder="Valor" class="spec-value-field">
                                <button type="button" class="remove-spec" onclick="removeSpecInput(this)">×</button>
                            </div>
                        </div>
                        <button type="button" id="add-spec" onclick="addSpecInput()">+ Agregar Especificación</button>
                        
                        <button type="button" id="save-product">Crear Producto</button>
                    `;
                    break;

                case 'edit-product':
                    const product = findProductById(id);
                    if (product) {
                        const productCategoryId = findProductCategory(id);
                        title = 'Editar Producto';
                        
                        // Generar HTML para características existentes
                        let featuresHtml = '';
                        if (product.features && product.features.length > 0) {
                            product.features.forEach((feature, index) => {
                                featuresHtml += `
                                    <div class="feature-input">
                                        <input type="text" value="${feature}" class="feature-input-field" placeholder="Característica ${index + 1}">
                                        <button type="button" class="remove-feature" onclick="removeFeatureInput(this)">×</button>
                                    </div>
                                `;
                            });
                        } else {
                            featuresHtml = `
                                <div class="feature-input">
                                    <input type="text" placeholder="Característica 1" class="feature-input-field">
                                    <button type="button" class="remove-feature" onclick="removeFeatureInput(this)">×</button>
                                </div>
                            `;
                        }

                        // Generar HTML para especificaciones existentes
                        let specsHtml = '';
                        if (product.specs) {
                            Object.entries(product.specs).forEach(([key, value], index) => {
                                specsHtml += `
                                    <div class="spec-input">
                                        <input type="text" value="${key}" class="spec-name-field" placeholder="Nombre especificación">
                                        <input type="text" value="${value}" class="spec-value-field" placeholder="Valor">
                                        <button type="button" class="remove-spec" onclick="removeSpecInput(this)">×</button>
                                    </div>
                                `;
                            });
                        } else {
                            specsHtml = `
                                <div class="spec-input">
                                    <input type="text" placeholder="Nombre especificación" class="spec-name-field">
                                    <input type="text" placeholder="Valor" class="spec-value-field">
                                    <button type="button" class="remove-spec" onclick="removeSpecInput(this)">×</button>
                                </div>
                            `;
                        }
                        
                        // Generar HTML para imágenes existentes
                        let imagesHtml = '';
                        if (product.images && product.images.length > 0) {
                            imagesHtml = `
                                <div class="image-preview">
                                    <img src="${product.images[0]}" alt="Imagen del producto">
                                </div>
                                <div id="uploaded-images" class="uploaded-images">
                                    ${product.images.map((img, index) => `
                                        <div class="uploaded-image" data-index="${index}">
                                            <img src="${img}" alt="Imagen ${index + 1}">
                                            <button type="button" class="remove-image" onclick="removeProductImage('${id}', ${index})">×</button>
                                        </div>
                                    `).join('')}
                                </div>
                            `;
                        } else {
                            imagesHtml = `
                                <div class="image-preview">
                                    <i class="fas fa-image placeholder"></i>
                                </div>
                                <div id="uploaded-images" class="uploaded-images"></div>
                            `;
                        }
                        
                        formHtml = `
                            <h3>${title}</h3>
                            <input type="hidden" id="product-id" value="${product.id}">
                            <input type="text" id="product-title" value="${product.title}" required>
                            <textarea id="product-desc" required>${product.description}</textarea>
                            <input type="text" id="product-price" value="${product.price}" required>
                            <input type="text" id="product-original-price" value="${product.originalPrice || ''}" placeholder="Precio original (opcional)">
                            <select id="product-category" required>
                                ${appData.categories.map(cat => `<option value="${cat.id}" ${cat.id === productCategoryId ? 'selected' : ''}>${cat.title}</option>`).join('')}
                            </select>
                            <select id="product-badge">
                                <option value="">Sin Badge</option>
                                <option value="Exclusivo" ${product.badge === 'Exclusivo' ? 'selected' : ''}>Exclusivo</option>
                                <option value="Más Vendido" ${product.badge === 'Más Vendido' ? 'selected' : ''}>Más Vendido</option>
                                <option value="Nuevo" ${product.badge === 'Nuevo' ? 'selected' : ''}>Nuevo</option>
                                <option value="Edición Limitada" ${product.badge === 'Edición Limitada' ? 'selected' : ''}>Edición Limitada</option>
                                <option value="Oferta" ${product.badge === 'Oferta' ? 'selected' : ''}>Oferta</option>
                            </select>
                            
                            <h4>Imágenes del Producto</h4>
                            <div id="images-container">
                                ${imagesHtml}
                                <input type="file" id="product-image-upload" accept="image/*" multiple style="display: none;">
                                <button type="button" class="image-upload-btn" onclick="document.getElementById('product-image-upload').click()">
                                    <i class="fas fa-upload"></i>
                                    Subir Imágenes
                                </button>
                            </div>
                            
                            <h4>Características</h4>
                            <div id="features-container">
                                ${featuresHtml}
                            </div>
                            <button type="button" id="add-feature" onclick="addFeatureInput()">+ Agregar Característica</button>
                            
                            <h4>Especificaciones</h4>
                            <div id="specs-container">
                                ${specsHtml}
                            </div>
                            <button type="button" id="add-spec" onclick="addSpecInput()">+ Agregar Especificación</button>
                            
                            <div class="form-row">
                                <button type="button" id="save-product">Guardar Cambios</button>
                                <button type="button" id="delete-product" style="background: var(--primary-pink);">Eliminar Producto</button>
                            </div>
                        `;
                    }
                    break;
            }

            editForm.innerHTML = formHtml;
            editOverlay.classList.add('active');

            // Configurar eventos del formulario
            setupEditFormEvents(mode, id);
            
            // Configurar subida de imágenes para productos
            if (mode === 'new-product' || mode === 'edit-product') {
                setupImageUpload(id);
            }
        }

        // Configurar subida de imágenes
        function setupImageUpload(productId) {
            const imageUpload = document.getElementById('product-image-upload');
            const uploadedImagesContainer = document.getElementById('uploaded-images');
            
            imageUpload.addEventListener('change', async function(e) {
                const files = e.target.files;
                if (files.length > 0) {
                    for (let i = 0; i < files.length; i++) {
                        const file = files[i];
                        
                        try {
                            // Subir imagen a Firebase Storage
                            const imageUrl = await uploadImageToFirebase(file);
                            
                            // Actualizar vista previa principal
                            const imagePreview = document.querySelector('.image-preview');
                            imagePreview.innerHTML = `<img src="${imageUrl}" alt="Vista previa">`;
                            
                            // Agregar a lista de imágenes subidas
                            const imageElement = document.createElement('div');
                            imageElement.className = 'uploaded-image';
                            imageElement.innerHTML = `
                                <img src="${imageUrl}" alt="Imagen subida">
                                <button type="button" class="remove-image" onclick="removeTempImage(this)">×</button>
                            `;
                            
                            uploadedImagesContainer.appendChild(imageElement);
                            
                            // Guardar imagen temporalmente
                            tempProductImages.push(imageUrl);
                        } catch (error) {
                            console.error('Error al subir imagen:', error);
                            alert('Error al subir la imagen. Inténtalo de nuevo.');
                        }
                    }
                }
            });
        }

        // Función para subir imagen a Firebase Storage
        async function uploadImageToFirebase(file) {
            if (!window.firebase || !window.firebase.storage) {
                throw new Error('Firebase no está inicializado');
            }

            const { ref, uploadBytes, getDownloadURL } = window.firebase.storageFunctions;
            const storageRef = ref(window.firebase.storage, `products/${Date.now()}_${file.name}`);
            
            // Subir archivo
            await uploadBytes(storageRef, file);
            
            // Obtener URL de descarga
            const downloadURL = await getDownloadURL(storageRef);
            
            return downloadURL;
        }

        function removeTempImage(button) {
            const imageElement = button.parentElement;
            const imageIndex = Array.from(imageElement.parentElement.children).indexOf(imageElement);
            
            if (imageIndex !== -1) {
                tempProductImages.splice(imageIndex, 1);
                imageElement.remove();
                
                // Actualizar vista previa principal
                const imagePreview = document.querySelector('.image-preview');
                if (tempProductImages.length > 0) {
                    imagePreview.innerHTML = `<img src="${tempProductImages[0]}" alt="Vista previa">`;
                } else {
                    imagePreview.innerHTML = `<i class="fas fa-image placeholder"></i>`;
                }
            }
        }

        async function removeProductImage(productId, imageIndex) {
            const product = findProductById(productId);
            if (product && product.images) {
                // Eliminar imagen de Firebase Storage si es necesario
                const imageUrl = product.images[imageIndex];
                if (imageUrl.includes('firebasestorage')) {
                    try {
                        await deleteImageFromFirebase(imageUrl);
                    } catch (error) {
                        console.error('Error al eliminar imagen de Firebase:', error);
                    }
                }
                
                product.images.splice(imageIndex, 1);
                openEditModal('edit-product', productId); // Recargar el modal
            }
        }

        // Función para eliminar imagen de Firebase Storage
        async function deleteImageFromFirebase(imageUrl) {
            if (!window.firebase || !window.firebase.storage) {
                throw new Error('Firebase no está inicializado');
            }

            const { ref, deleteObject } = window.firebase.storageFunctions;
            
            // Crear referencia a la imagen usando la URL
            const imageRef = ref(window.firebase.storage, imageUrl);
            
            // Eliminar la imagen
            await deleteObject(imageRef);
        }

        // Funciones auxiliares para características y especificaciones
        function addFeatureInput() {
            const container = document.getElementById('features-container');
            const featureCount = container.children.length + 1;
            const featureInput = document.createElement('div');
            featureInput.className = 'feature-input';
            featureInput.innerHTML = `
                <input type="text" placeholder="Característica ${featureCount}" class="feature-input-field">
                <button type="button" class="remove-feature" onclick="removeFeatureInput(this)">×</button>
            `;
            container.appendChild(featureInput);
        }

        function removeFeatureInput(button) {
            if (document.getElementById('features-container').children.length > 1) {
                button.parentElement.remove();
            }
        }

        function addSpecInput() {
            const container = document.getElementById('specs-container');
            const specInput = document.createElement('div');
            specInput.className = 'spec-input';
            specInput.innerHTML = `
                <input type="text" placeholder="Nombre especificación" class="spec-name-field">
                <input type="text" placeholder="Valor" class="spec-value-field">
                <button type="button" class="remove-spec" onclick="removeSpecInput(this)">×</button>
            `;
            container.appendChild(specInput);
        }

        function removeSpecInput(button) {
            if (document.getElementById('specs-container').children.length > 1) {
                button.parentElement.remove();
            }
        }

        function setupEditFormEvents(mode, id) {
            switch (mode) {
                case 'edit-content':
                    document.getElementById('save-content').addEventListener('click', function() {
                        const key = document.getElementById('edit-content-key').value;
                        const value = document.getElementById('edit-content-value').value;
                        appData.content[key] = value;
                        updateContentElement(key, value);
                        saveAppData();
                        closeEditModal();
                    });
                    break;

                case 'new-category':
                case 'edit-category':
                    document.getElementById('save-category').addEventListener('click', function() {
                        const title = document.getElementById('category-title').value;
                        const description = document.getElementById('category-desc').value;
                        const icon = document.getElementById('category-icon').value;

                        if (mode === 'new-category') {
                            const newCategory = {
                                id: generateId(),
                                title: title,
                                description: description,
                                icon: icon,
                                products: []
                            };
                            appData.categories.push(newCategory);
                        } else {
                            const category = appData.categories.find(cat => cat.id === id);
                            if (category) {
                                category.title = title;
                                category.description = description;
                                category.icon = icon;
                            }
                        }

                        renderCategories();
                        renderCategoryPages();
                        updateFooterCollections();
                        saveAppData();
                        closeEditModal();
                    });

                    if (mode === 'edit-category') {
                        document.getElementById('delete-category').addEventListener('click', function() {
                            if (confirm('¿Estás seguro de que quieres eliminar esta categoría? Se eliminarán todos sus productos.')) {
                                appData.categories = appData.categories.filter(cat => cat.id !== id);
                                renderCategories();
                                renderCategoryPages();
                                updateFooterCollections();
                                saveAppData();
                                closeEditModal();
                            }
                        });
                    }
                    break;

                case 'new-product':
                case 'edit-product':
                    document.getElementById('save-product').addEventListener('click', function() {
                        const title = document.getElementById('product-title').value;
                        const description = document.getElementById('product-desc').value;
                        const price = document.getElementById('product-price').value;
                        const originalPrice = document.getElementById('product-original-price').value;
                        const categoryId = document.getElementById('product-category').value;
                        const badge = document.getElementById('product-badge').value;

                        // Recoger características
                        const features = [];
                        document.querySelectorAll('.feature-input-field').forEach(input => {
                            if (input.value.trim()) {
                                features.push(input.value.trim());
                            }
                        });

                        // Recoger especificaciones
                        const specs = {};
                        document.querySelectorAll('.spec-input').forEach(spec => {
                            const name = spec.querySelector('.spec-name-field').value.trim();
                            const value = spec.querySelector('.spec-value-field').value.trim();
                            if (name && value) {
                                specs[name] = value;
                            }
                        });

                        // Recoger imágenes
                        let images = [];
                        if (mode === 'edit-product') {
                            const product = findProductById(id);
                            if (product && product.images) {
                                images = product.images;
                            }
                        }
                        
                        // Agregar imágenes temporales
                        images = images.concat(tempProductImages);
                        tempProductImages = [];

                        const productData = {
                            id: mode === 'new-product' ? generateId() : id,
                            title: title,
                            description: description,
                            price: price,
                            originalPrice: originalPrice || undefined,
                            badge: badge || undefined,
                            images: images,
                            features: features,
                            specs: specs
                        };

                        if (mode === 'new-product') {
                            const category = appData.categories.find(cat => cat.id === categoryId);
                            if (category) {
                                category.products.push(productData);
                            }
                        } else {
                            // Encontrar y actualizar el producto existente
                            for (const category of appData.categories) {
                                const productIndex = category.products.findIndex(p => p.id === id);
                                if (productIndex !== -1) {
                                    // Si cambió de categoría, mover el producto
                                    if (category.id !== categoryId) {
                                        category.products.splice(productIndex, 1);
                                        const newCategory = appData.categories.find(cat => cat.id === categoryId);
                                        if (newCategory) {
                                            newCategory.products.push(productData);
                                        }
                                    } else {
                                        category.products[productIndex] = productData;
                                    }
                                    break;
                                }
                            }
                        }

                        renderFeaturedProducts();
                        renderCategoryPages();
                        saveAppData();
                        closeEditModal();
                    });

                    if (mode === 'edit-product') {
                        document.getElementById('delete-product').addEventListener('click', function() {
                            if (confirm('¿Estás seguro de que quieres eliminar este producto?')) {
                                // Eliminar imágenes de Firebase Storage
                                const product = findProductById(id);
                                if (product && product.images) {
                                    product.images.forEach(imageUrl => {
                                        if (imageUrl.includes('firebasestorage')) {
                                            deleteImageFromFirebase(imageUrl).catch(error => {
                                                console.error('Error al eliminar imagen:', error);
                                            });
                                        }
                                    });
                                }
                                
                                for (const category of appData.categories) {
                                    category.products = category.products.filter(p => p.id !== id);
                                }
                                renderFeaturedProducts();
                                renderCategoryPages();
                                saveAppData();
                                closeEditModal();
                            }
                        });
                    }
                    break;
            }
        }

        function updateContentElement(key, value) {
            const elements = document.querySelectorAll(`[data-type="${key}"]`);
            elements.forEach(element => {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.value = value;
                } else {
                    element.textContent = value;
                }
            });
        }

        function closeEditModal() {
            const editOverlay = document.getElementById('edit-overlay');
            editOverlay.classList.remove('active');
            tempProductImages = [];
        }

        function generateId() {
            return Date.now().toString();
        }

        // ===== SISTEMA DE PERSISTENCIA =====
        async function saveAppData() {
            console.log('💾 Guardando datos de la aplicación...');
            
            // Guardar en localStorage como respaldo
            localStorage.setItem('bymBoutiqueData', JSON.stringify(appData));
            
            // Intentar guardar en Firebase si está disponible
            if (window.firebase && window.firebase.db) {
                await saveToFirebase();
            } else {
                alert('✅ Cambios guardados en localStorage');
            }
        }

        async function saveToFirebase() {
            try {
                const { setDoc, doc } = window.firebase.firestore;
                
                // Guardar datos en Firestore
                await setDoc(doc(window.firebase.db, "store", "data"), appData);
                
                console.log('🔥 Datos guardados en Firebase');
                alert('✅ Cambios guardados en Firebase y localStorage');
            } catch (error) {
                console.error('❌ Error al guardar en Firebase:', error);
                alert('❌ Error al guardar en Firebase. Los cambios se guardaron en localStorage.');
            }
        }

        async function loadAppData() {
            // Primero intentar cargar desde Firebase
            if (window.firebase && window.firebase.db) {
                try {
                    const { getDoc, doc } = window.firebase.firestore;
                    const docRef = doc(window.firebase.db, "store", "data");
                    const docSnap = await getDoc(docRef);
                    
                    if (docSnap.exists()) {
                        const firebaseData = docSnap.data();
                        // Fusionar datos de Firebase con la estructura por defecto
                        appData = {
                            ...appData,
                            ...firebaseData,
                            categories: firebaseData.categories || appData.categories
                        };
                        console.log('📂 Datos cargados desde Firebase');
                        return;
                    }
                } catch (error) {
                    console.error('❌ Error al cargar desde Firebase:', error);
                }
            }
            
            // Si Firebase falla, cargar desde localStorage
            const savedData = localStorage.getItem('bymBoutiqueData');
            if (savedData) {
                try {
                    const parsedData = JSON.parse(savedData);
                    // Fusionar datos guardados con la estructura por defecto
                    appData = {
                        ...appData,
                        ...parsedData,
                        categories: parsedData.categories || appData.categories
                    };
                    console.log('📂 Datos cargados desde localStorage');
                } catch (e) {
                    console.error('❌ Error al cargar datos:', e);
                }
            }
        }

        // ===== ADMIN PANEL =====
        function initializeAdminPanel() {
            const adminToggle = document.getElementById('admin-toggle');
            const adminPanel = document.getElementById('admin-panel');
            const adminClose = document.getElementById('admin-close');
            const adminLoginBtn = document.getElementById('admin-login-btn');

            // Alternar panel de administración
            adminToggle.addEventListener('click', function() {
                adminPanel.classList.toggle('active');
            });

            adminClose.addEventListener('click', function() {
                adminPanel.classList.remove('active');
            });

            // Login de administrador
            adminLoginBtn.addEventListener('click', async function() {
                const email = document.getElementById('admin-email').value;
                const password = document.getElementById('admin-password').value;
                
                if (!email || !password) {
                    alert('Por favor ingresa email y contraseña');
                    return;
                }

                try {
                    // Autenticar con Firebase Auth
                    const { signInWithEmailAndPassword } = window.firebase.authFunctions;
                    await signInWithEmailAndPassword(window.firebase.auth, email, password);
                    
                    // Éxito - el estado de autenticación se maneja en onAuthStateChanged
                    adminPanel.classList.remove('active');
                    alert('🔓 Sesión de administrador iniciada correctamente.');
                    
                    // Actualizar la interfaz para mostrar botones de edición
                    renderCategoryPages();
                } catch (error) {
                    console.error('Error de autenticación:', error);
                    alert('❌ Error al iniciar sesión. Verifica tus credenciales.');
                }
            });

            console.log('✅ PANEL ADMIN INICIALIZADO');
        }
    </script>
</body>
</html>
